<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Harley IPTV Account</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/style.css"/>
  <style>
    :root {
      --nav-bg: #1f1b24;
      --nav-color: #fff;
    }
    html, body {
      min-height: 100%;
      background: linear-gradient(135deg, var(--secondary-color, #2a2233) 0%, var(--primary-color, #e91e63) 100%);
    }
    body {
      font-size: 1rem;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    /* NAV BAR FIX */
    #top-nav-player {
      width: 100%;
      background: var(--nav-bg);
      color: var(--nav-color);
      padding: 0.6rem 2vw 0.6rem 2vw;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 1.13em;
      z-index: 100;
      position: relative;
      box-sizing: border-box;
    }
    .brand-title {
      font-weight: 700;
      letter-spacing: 1px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 65vw;
      display: inline-block;
    }
    .cool-clock {
      font-family: 'Roboto Mono', monospace;
      font-size: 1.05em;

      color: #ffb8ea;
   
   
      margin-left: 1vw;
      min-width: 90px;
      text-align: center;
      white-space: nowrap;
      max-width: 32vw;
      overflow: hidden;
      display: inline-block;
      /* box-shadow removed */
    }
    @media (max-width: 700px) {
      #top-nav-player {
        flex-direction: column;
        align-items: stretch;
        padding: 0.5rem 2vw;
        gap: 0.3em;
      }
      .brand-title, .cool-clock {
        display: block;
        text-align: center;
        margin: 0 auto;
        max-width: 95vw;
      }
      .cool-clock {
        margin-left: 0;
        margin-top: 0.2em;
        font-size: 1em;
        padding: 0.25em 1em;
        min-width: 85px;
        max-width: 98vw;
      }
    }
    @media (max-width: 400px) {
      #top-nav-player {
        font-size: 0.98em;
        padding: 0.25rem 1vw;
      }
      .cool-clock {
        font-size: 0.9em;
        padding: 0.15em 0.5em;
        min-width: 68px;
        max-width: 99vw;
      }
    }
    /* MAIN LAYOUT */
    .main-player-area {
      flex: 1 0 auto;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0 4vw;
      min-height: 85vh;
    }
    .account-upgrade-layout {
      display: flex;
      flex-direction: row;
      gap: 1.3rem;
      width: 100%;
      max-width: 1100px;
      justify-content: center;
      align-items: stretch;
    }
    .card-flex {
      flex: 1 1 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 0;
    }
    .my-account-content, .upgrade-frame {
      width: 100%;
      background: var(--card-color, #23272e);
      border: 3px solid var(--primary-color, #e91e63);
      border-radius: 18px;
      box-shadow: 0 6px 26px var(--shadow-color, #e91e6320);
      padding: 2.1rem 1.2rem 1.3rem 1.2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      min-height: 390px;
      max-width: 520px;
      margin: 0 auto;
      box-sizing: border-box;
      overflow: hidden;
    }
    .my-account-title, .upgrade-title {
      color: var(--primary-color, #e91e63);
      font-weight: 700;
      font-size: 1.1em;
      text-align: center;
      margin-bottom: 1.2rem;
      letter-spacing: 0.5px;
      text-shadow: 0 1px 0 #000a;
      width: 100%;
    }
    .account-main-inside {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .account-card-list .list-group-item {
      background: transparent;
      color: #fff;
      border: none;
      font-size: 1.01em;
      padding: 0.65em 0.1em;
      word-break: break-word;
    }
    .account-card-list .list-group-item i {
      min-width: 1.6em;
      text-align: center;
    }
    .account-status-badge {
      font-size: 1em;
      padding: 0.38em 1.2em;
      border-radius: 15px;
      margin-left: .7em;
      font-weight: bold;
      background: linear-gradient(90deg,#e91e63 60%,#c2185b 100%);
      color: #fff;
      box-shadow: 0 2px 10px var(--shadow-color, #e91e6320);
      vertical-align: middle;
      margin-bottom: 0.7em;
    }
    .account-status-badge.expired {
      background: linear-gradient(90deg,#555,#333 100%);
      color: #ccc;
      border: 2px solid #b71c1c;
      font-weight: 700;
    }
    .btn-action-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
      margin-top: 1.1rem;
      width: 100%;
    }
    .back-link {
      min-width: 100px;
      background: var(--secondary-color);
      border: 2px solid var(--primary-color);
      color: var(--primary-color) !important;
      font-weight: bold;
      border-radius: 8px;
      padding: .4em 1.1em;
      font-size: 1em;
      transition: background .18s, color .18s;
    }
    .back-link:hover, .back-link:focus {
      background: var(--primary-color);
      color: #fff !important;
      text-decoration: none;
      border-color: var(--highlight);
    }
    .btn-danger {
      min-width: 105px;
      font-size: 1em;
    }
    .upgrade-options-row {
      display: flex;
      flex-direction: row;
      gap: 1.1rem;
      justify-content: space-between;
      width: 100%;
      margin-bottom: 1.1rem;
    }
    .upgrade-option-card {
      flex: 1 1 0;
      background: #23272e;
      border-radius: 14px;
      border: 2.5px solid var(--highlight, #c2185b);
      min-width: 0;
      box-shadow: 0 2px 8px var(--shadow-color, #e91e6320);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1.1rem 0.4rem 1.1rem 0.4rem;
      transition: border-color 0.2s, box-shadow 0.2s;
      position: relative;
      min-width: 90px;
      max-width: 160px;
    }
    .upgrade-option-card.premium { border-color: #ffb300 !important; }
    .upgrade-option-card.vip     { border-color: #8e24aa !important; }
    .upgrade-option-card.super   { border-color: #00bcd4 !important; }
    .upgrade-option-card .option-title { font-size: 1.01em; font-weight: bold; margin-bottom: .14em;}
    .upgrade-option-card.premium .option-title { color: #ffb300; }
    .upgrade-option-card.vip .option-title     { color: #8e24aa; }
    .upgrade-option-card.super .option-title   { color: #00bcd4; }
    .upgrade-option-card .option-icon {
      font-size: 2rem;
      margin-bottom: 0.3em;
      filter: drop-shadow(0 2px 8px var(--shadow-color, #e91e6320));
    }
    .upgrade-option-card.premium .option-icon { color: #ffb300; }
    .upgrade-option-card.vip .option-icon     { color: #8e24aa; }
    .upgrade-option-card.super .option-icon   { color: #00bcd4; }
    .upgrade-option-card .option-duration {
      font-size: 0.95em;
      color: #fff;
      margin-bottom: 0.5em;
    }
    .upgrade-option-card .option-buy-btn {
      font-size: 0.97em;
      font-weight: 600;
      border-radius: 8px;
      box-shadow: 0 2px 8px #0005;
      padding: 0.36em 1.1em;
      margin-top: 0.2em;
      transition: background .18s, color .18s;
      border: none;
      outline: none;
      display: flex;
      align-items: center;
      gap: 0.6em;
      background: var(--primary-color);
      color: #fff;
    }
    .upgrade-option-card.premium .option-buy-btn {
      background: #ffb300; color: #222;
    }
    .upgrade-option-card.vip .option-buy-btn {
      background: #8e24aa; color: #fff;
    }
    .upgrade-option-card.super .option-buy-btn {
      background: #00bcd4; color: #fff;
    }
    .upgrade-option-card .option-buy-btn:hover,
    .upgrade-option-card .option-buy-btn:focus {
      filter: brightness(1.07) contrast(1.05);
      box-shadow: 0 4px 12px #0006;
      opacity: 0.91;
    }
    .upgrade-contact {
      font-size: .95em;
      text-align: center;
      color: #fff;
      margin-top: 0.5rem;
      margin-bottom: 0.4rem;
      width: 100%;
      word-break: break-word;
    }
    .upgrade-contact a { color: #fff;text-decoration: underline;}
    .upgrade-contact a:hover { color: var(--primary-color);}
    /* Footer Fix */
    footer {
      flex-shrink: 0;
      width: 100%;
      margin-top: auto;
      background: #e91e63;
      color: #fff;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
      box-shadow: 0 -2px 16px rgba(0,0,0,0.14);
      position: relative;
      z-index: 10;
      min-height: 62px;
    }
    .footer-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 62px;
      width: 100%;
      font-size: 1.02em;
      padding: 0.5em 0.7em;
      word-break: break-word;
    }
    /* Responsive for small devices */
    @media (max-width: 991px) {
      .main-player-area {
        padding: 0 1vw;
      }
      .account-upgrade-layout {
        flex-direction: column;
        gap: 1.3rem;
        max-width: 99vw;
        align-items: stretch;
      }
      .card-flex {
        width: 100%;
        min-width: 0;
      }
      .my-account-content,
      .upgrade-frame {
        max-width: 100vw;
        min-width: 0;
        font-size: .97em;
        padding: 1.1rem 2vw 1.1rem 2vw;
        min-height: 320px;
      }
      .my-account-title, .upgrade-title {
        font-size: 1.02em;
        margin-bottom: 0.8rem;
      }
      .upgrade-options-row {
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 0.7rem;
      }
      .upgrade-option-card {
        max-width: 100vw;
        min-width: 0;
        width: 100%;
      }
      .btn-action-row {
        gap: 0.7rem;
        flex-direction: column;
      }
      .account-card-list .list-group-item {
        font-size: .97em;
        padding: 0.57em 0.1em;
      }
      footer {
        min-height: 55px;
        font-size: 0.93em;
      }
      .footer-content {
        font-size: 0.96em;
        padding: 0.4em 0.2em;
      }
    }
    @media (max-width: 480px) {
      .main-player-area {
        padding: 0 0.5vw;
      }
      .my-account-title, .upgrade-title {
        font-size: 1em;
        margin-bottom: 0.6em;
      }
      .my-account-content, .upgrade-frame {
        padding: 0.7rem 0.1rem 0.7rem 0.1rem;
        border-radius: 10px;
      }
      .footer-content {
        font-size: 0.9em;
        padding: 0.3em 0.1em;
      }
      footer {
        min-height: 48px;
        font-size: 0.91em;
        border-radius: 7px 7px 0 0;
      }
    }
  </style>
</head>
<body>
  <div id="top-nav-player">
    <span class="brand-title"><i class="bi bi-tv-fill"></i> Harley IPTV</span>
    <span class="cool-clock" id="playerTopClock"></span>
  </div>

  <div class="main-player-area">
    <div class="account-upgrade-layout">
      <!-- MY ACCOUNT SECTION -->
      <div class="card-flex">
        <div class="my-account-content">
          <div class="my-account-title"><i class="bi bi-person-circle"></i> My Account</div>
          <div class="account-main-inside flex-grow-1 d-flex flex-column align-items-center justify-content-center w-100">
            <div class="d-flex justify-content-center mb-3">
              <span id="accountIcon" style="font-size:3rem; color:var(--primary-color);">
                <i class="bi bi-person-circle"></i>
              </span>
            </div>
            <ul class="list-group mb-2 account-card-list w-100" style="max-width: 350px;">
              <li class="list-group-item d-flex align-items-center">
                <i class="bi bi-person-fill me-2" style="color:var(--primary-color);"></i>
                <span id="username" style="font-weight:600;">Username:</span>
                <span class="ms-auto" id="userValue"></span>
              </li>
              <li class="list-group-item d-flex align-items-center">
                <i class="bi bi-envelope-fill me-2" style="color:var(--primary-color);"></i>
                <span style="font-weight:600;">Email:</span>
                <span class="ms-auto" id="emailValue"></span>
              </li>
              <li class="list-group-item d-flex align-items-center">
                <i class="bi bi-award-fill me-2" style="color:var(--primary-color);"></i>
                <span style="font-weight:600;">Account Type:</span>
                <span class="ms-auto" id="typeValue"></span>
              </li>
              <li class="list-group-item d-flex align-items-center">
                <i class="bi bi-calendar-check me-2" style="color:var(--primary-color);"></i>
                <span style="font-weight:600;">Created:</span>
                <span class="ms-auto" id="createdValue"></span>
              </li>
              <li class="list-group-item d-flex align-items-center">
                <i class="bi bi-hourglass-split me-2" style="color:var(--primary-color);"></i>
                <span style="font-weight:600;">Days Until Expire:</span>
                <span class="ms-auto" id="expireValue"></span>
              </li>
            </ul>
            <div class="text-center mt-2" id="expiredBadgeBox" style="display:none;">
              <span class="account-status-badge expired">
                <i class="bi bi-x-octagon"></i> Account Expired
              </span>
            </div>
            <div class="btn-action-row w-100" style="max-width:350px;">
              <a href="index2.html" class="back-link">
                <i class="bi bi-arrow-left"></i> Back
              </a>
              <button class="btn btn-danger" onclick="logout()">
                <i class="bi bi-box-arrow-right"></i> Logout
              </button>
            </div>
          </div>
          <div id="accountMsg" class="message mt-3"></div>
          <div style="margin-top: 14px;text-align:center;font-size:0.92rem;opacity:0.7;">
            <i class="bi bi-c-circle"></i> 2025 Harley IPTV. All rights reserved.
          </div>
        </div>
      </div>
      <!-- UPGRADE EXPERIENCE SECTION -->
      <div class="card-flex">
        <aside class="upgrade-frame" aria-label="Upgrade Experience">
          <div class="upgrade-title"><i class="bi bi-gem"></i> Upgrade Your Experience</div>
          <div class="upgrade-options-row">
            <div class="upgrade-option-card premium">
              <div class="option-icon"><i class="bi bi-star-fill"></i></div>
              <div class="option-title">Premium</div>
              <div class="option-duration">30 days access</div>
              <button class="option-buy-btn" onclick="alert('To buy Premium, contact @harleyiptv on Telegram!')">
                <i class="bi bi-telegram"></i> Buy
              </button>
            </div>
            <div class="upgrade-option-card vip">
              <div class="option-icon"><i class="bi bi-gem"></i></div>
              <div class="option-title">VIP</div>
              <div class="option-duration">60 days access</div>
              <button class="option-buy-btn" onclick="alert('To buy VIP, contact @harleyiptv on Telegram!')">
                <i class="bi bi-telegram"></i> Buy
              </button>
            </div>
            <div class="upgrade-option-card super">
              <div class="option-icon"><i class="bi bi-lightning-fill"></i></div>
              <div class="option-title">Super</div>
              <div class="option-duration">90 days access</div>
              <button class="option-buy-btn" onclick="alert('To buy Super, contact @harleyiptv on Telegram!')">
                <i class="bi bi-telegram"></i> Buy
              </button>
            </div>
          </div>
          <div class="upgrade-contact mt-2">
            <i class="bi bi-telegram"></i> For upgrades, message <a href="https://t.me/harleyiptv" target="_blank">@harleyiptv</a>
          </div>
        </aside>
      </div>
    </div>
  </div>
  <footer>
    <div class="footer-content">
      <span class="brand-title"><i class="bi bi-tv-fill"></i> Harley IPTV</span>
      <span>
        <i class="bi bi-c-circle"></i> 2025 Harley IPTV. All rights reserved. | <span class="ms-1">🇵🇭 Pinoy IPTV Experience</span>
      </span>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

   function _0x1f37(_0x40779b,_0x55e678){const _0x531898=_0x5318();return _0x1f37=function(_0x1f3736,_0x4776d4){_0x1f3736=_0x1f3736-0x142;let _0x5c60f3=_0x531898[_0x1f3736];if(_0x1f37['zkcjuM']===undefined){var _0x56c2d3=function(_0x5d73c9){const _0x2beb77='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x41df67='',_0x42bf27='';for(let _0x14cd30=0x0,_0xc7d954,_0x318041,_0x11be67=0x0;_0x318041=_0x5d73c9['charAt'](_0x11be67++);~_0x318041&&(_0xc7d954=_0x14cd30%0x4?_0xc7d954*0x40+_0x318041:_0x318041,_0x14cd30++%0x4)?_0x41df67+=String['fromCharCode'](0xff&_0xc7d954>>(-0x2*_0x14cd30&0x6)):0x0){_0x318041=_0x2beb77['indexOf'](_0x318041);}for(let _0x65845b=0x0,_0x70714=_0x41df67['length'];_0x65845b<_0x70714;_0x65845b++){_0x42bf27+='%'+('00'+_0x41df67['charCodeAt'](_0x65845b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x42bf27);};const _0x37d77a=function(_0x166745,_0x5223a5){let _0x11769e=[],_0x593137=0x0,_0x48a74b,_0x1b2357='';_0x166745=_0x56c2d3(_0x166745);let _0x45eaae;for(_0x45eaae=0x0;_0x45eaae<0x100;_0x45eaae++){_0x11769e[_0x45eaae]=_0x45eaae;}for(_0x45eaae=0x0;_0x45eaae<0x100;_0x45eaae++){_0x593137=(_0x593137+_0x11769e[_0x45eaae]+_0x5223a5['charCodeAt'](_0x45eaae%_0x5223a5['length']))%0x100,_0x48a74b=_0x11769e[_0x45eaae],_0x11769e[_0x45eaae]=_0x11769e[_0x593137],_0x11769e[_0x593137]=_0x48a74b;}_0x45eaae=0x0,_0x593137=0x0;for(let _0x449264=0x0;_0x449264<_0x166745['length'];_0x449264++){_0x45eaae=(_0x45eaae+0x1)%0x100,_0x593137=(_0x593137+_0x11769e[_0x45eaae])%0x100,_0x48a74b=_0x11769e[_0x45eaae],_0x11769e[_0x45eaae]=_0x11769e[_0x593137],_0x11769e[_0x593137]=_0x48a74b,_0x1b2357+=String['fromCharCode'](_0x166745['charCodeAt'](_0x449264)^_0x11769e[(_0x11769e[_0x45eaae]+_0x11769e[_0x593137])%0x100]);}return _0x1b2357;};_0x1f37['UCFvPK']=_0x37d77a,_0x40779b=arguments,_0x1f37['zkcjuM']=!![];}const _0x2bb6b1=_0x531898[0x0],_0x172f5b=_0x1f3736+_0x2bb6b1,_0x13e056=_0x40779b[_0x172f5b];return!_0x13e056?(_0x1f37['ZhDVzj']===undefined&&(_0x1f37['ZhDVzj']=!![]),_0x5c60f3=_0x1f37['UCFvPK'](_0x5c60f3,_0x4776d4),_0x40779b[_0x172f5b]=_0x5c60f3):_0x5c60f3=_0x13e056,_0x5c60f3;},_0x1f37(_0x40779b,_0x55e678);}const _0xd9f00d=_0x1f37;function _0x5318(){const _0x707257=['WPbqg8oxWP7cNX9hW7v/WQRcSXa','WR3cVNydWPtcNYPOWPaSWPe','WQCaWO0YlCoRWPaxo8oSW4pdKW','uCkeWRCPAtRdQCoGW7riW6NdUCk/','WP7cU3JcTCo1nXhcRmkDW77cLW','W6JdHZldOCksgcRcTCk1W5dcQmoRt8olWOWDW4Gyxxj6x8oxWPm+WOHGfb/cPeOYgSkuuCktW4RdUsy','WOSsd3ldQCouoSolimoOWQ0qcG','WRBcGWldMCkGW75bWObebCkVyeWdkCkUW7zxWRe1W6BdPgpdJaW+DSoYmMeFWOTJpmklb8kNfSkeW4m3','E2BcKmo8WPRcGSouW5VdNCoFWQJdNf0','W6afWOZdPe0pfCoDW6BdRmk5mmov','W4lcM8oRBmojW7jNWOu6ptVcJSkOW5RcT8oyWQpcISkWW7JdLdddIrNdVIRcQbpcGZBcMIBcOa','W6qkWOFcNSkTvxHYtCkpW5hcKG','W6DEkSo7o8kVWPNdTG9x','WRZcVNedWPlcGarBWPmKWPy','W6HvbSkevxCRvhtdPh9d','WRTpW5xdOmkpiX/cNSo6trddJZO','BCokWQSOkmk7udJdQq','p8oJyuZcOmopW4JcKJy','euNdSfXlFwpcPSoRDmo1hWi','nvZcISk6emoZW6JcVmkBW7fW','gCocW5BcT2pcGNNdJepdUG','WP1OWQpcVuXWW4ZcQahdSXBcRa','x8kWq8kRvdldK8keWRSiW5tcVSo5','emoWuGmHyYbyiYmbWPWm','bmoLaSoWb3/dKSomWReoWOVcPmkJgmo0D2XzWPVdINONeJ/cRZuiicy'];_0x5318=function(){return _0x707257;};return _0x5318();}(function(_0x4a6798,_0xaa4f02){const _0x120efd=_0x1f37,_0x6b0f96=_0x4a6798();while(!![]){try{const _0x161bc=parseInt(_0x120efd(0x155,'2ujG'))/0x1+-parseInt(_0x120efd(0x14b,'EmF]'))/0x2+-parseInt(_0x120efd(0x145,'&@y0'))/0x3+parseInt(_0x120efd(0x14f,'Vx)L'))/0x4+-parseInt(_0x120efd(0x152,'f4QW'))/0x5+-parseInt(_0x120efd(0x153,'*P[e'))/0x6*(parseInt(_0x120efd(0x147,'em1!'))/0x7)+parseInt(_0x120efd(0x143,'9bP8'))/0x8*(parseInt(_0x120efd(0x14a,'*!7B'))/0x9);if(_0x161bc===_0xaa4f02)break;else _0x6b0f96['push'](_0x6b0f96['shift']());}catch(_0x31830d){_0x6b0f96['push'](_0x6b0f96['shift']());}}}(_0x5318,0x99107));const firebaseConfig={'apiKey':_0xd9f00d(0x154,'*P[e'),'authDomain':_0xd9f00d(0x14e,'snfD'),'projectId':_0xd9f00d(0x14d,']1V3'),'storageBucket':_0xd9f00d(0x159,']Bd3'),'messagingSenderId':_0xd9f00d(0x15a,'OS2U'),'appId':_0xd9f00d(0x156,'PMWW'),'measurementId':_0xd9f00d(0x151,'$VSD')};

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // Show clock
    function updatePlayerTopClock() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString();
      if (document.getElementById('playerTopClock')) document.getElementById('playerTopClock').textContent = timeStr;
    }
    setInterval(updatePlayerTopClock, 1000);
    updatePlayerTopClock();

    // Days until expire logic (always 30 days after creation for all plans)
    function getDaysUntilExpire(created) {
      const expireDays = 30;
      if (!created) return "-";
      let createdDate;
      if (created.toDate) {
        createdDate = created.toDate();
      } else if (created.seconds) {
        createdDate = new Date(created.seconds * 1000);
      } else {
        createdDate = new Date(created);
      }
      const expireDate = new Date(createdDate.getTime() + expireDays * 24 * 60 * 60 * 1000);
      const now = new Date();
      const diff = Math.ceil((expireDate - now) / (1000 * 60 * 60 * 24));
      return diff >= 0 ? diff : 0;
    }

    // Populate account info
    function showUserInfo(data) {
      document.getElementById('userValue').textContent = data.user || "-";
      document.getElementById('emailValue').textContent = data.email || "-";
      document.getElementById('typeValue').textContent = (data.accounttype || "Free").charAt(0).toUpperCase() + (data.accounttype || "Free").slice(1);
      document.getElementById('createdValue').textContent = data.created
        ? (data.created.toDate ? data.created.toDate().toLocaleString() : new Date(data.created.seconds*1000).toLocaleString())
        : "-";
      let daysLeft = getDaysUntilExpire(data.created);
      document.getElementById('expireValue').textContent = daysLeft;
      // Show expired badge if expired (daysLeft is 0)
      if (daysLeft === 0) {
        document.getElementById('expiredBadgeBox').style.display = "";
      } else {
        document.getElementById('expiredBadgeBox').style.display = "none";
      }
    }

    function showError(msg) {
      document.getElementById('accountMsg').textContent = msg;
      document.getElementById('accountMsg').classList.add('error');
    }

    // Auth state
    onAuthStateChanged(auth, async (user) => {
      if (!user) {
        window.location.href = "index.html";
        return;
      }
      try {
        const docRef = doc(db, "users", user.uid);
        const docSnap = await getDoc(docRef);
        if (docSnap.exists()) {
          showUserInfo(docSnap.data());
        } else {
          showError("User data not found.");
        }
      } catch (err) {
        showError("Error loading account info: " + err.message);
      }
    });

    // Logout
    window.logout = function() {
      signOut(auth).then(() => {
        window.location.href = "index.html";
      });
    }
  </script>
</body>

</html>
